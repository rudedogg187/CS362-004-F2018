        -:    0:Source:cardtest4.c
        -:    0:Graph:cardtest4.gcno
        -:    0:Data:cardtest4.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "dominion.h"
        -:    2:#include "dominion_helpers.h"
        -:    3:#include "rngs.h"
        -:    4:
        -:    5:#include <assert.h>
        -:    6:#include <stdio.h>
        -:    7:#include <string.h>
        -:    8:
        -:    9:
        -:   10:// mine
        1:   11:int main() {
        1:   12:	int isCardEffect = 1;
        1:   13:	int card = mine;
        1:   14:	int choice1 = village;
        1:   15:	int choice2 = remodel;
        1:   16:	int choice3 = 0;
        1:   17:	int handPos = 0;
        1:   18:	int bonus = 0;
        1:   19:	int isTrash = 0;
        1:   20:	int isFlag = 0;
        -:   21:
        1:   22:	printf("Mine Card Test\n");
        -:   23:
        1:   24:	int seed = 3;
        1:   25:	int players = 3;
        -:   26:	struct gameState G;
        -:   27:	struct gameState G2;
        -:   28:	
        1:   29:	int k[10] = { adventurer, mine, embargo, village, minion, mine, cutpurse, sea_hag, tribute, smithy };
        -:   30:
        1:   31:	initializeGame(players, k, seed, &G);
        1:   32:	memcpy(&G2, &G, sizeof(struct gameState));
        -:   33:
        1:   34:	if(isCardEffect == 0) {
    #####:   35:		mineEffect(&G, handPos, choice1, choice2);
        -:   36:	} else {
        1:   37:		cardEffect(card, choice1, choice2, choice3, &G, handPos, &bonus);
        -:   38:	}
        -:   39:
        1:   40:	int currPlayer = G.whoseTurn;
        1:   41:	int currPlayer2 = G2.whoseTurn;
        -:   42:
        1:   43:	if(
        1:   44:		G2.hand[currPlayer2][choice1] < copper ||
    #####:   45:		G2.hand[currPlayer2][choice1] > gold || 
    #####:   46:		choice2 > treasure_map ||
    #####:   47:		choice2 < curse  ||
    #####:   48:		(getCost(G2.hand[currPlayer][choice1]) + 3) >= getCost(choice2)
        -:   49:	) {
        1:   50:		printf("IN\n");
        -:   51:	} else {
    #####:   52:		printf("OUT\n");
    #####:   53:		gainCard(choice2, &G2, isFlag, currPlayer2);
    #####:   54:		discardCard(handPos, currPlayer2, &G2, isTrash);
    #####:   55:		printf("OUT\n");
        -:   56:	
    #####:   57:		int toTrash = G2.hand[currPlayer2][choice1];
    #####:   58:		for(int c = 0; c < G2.handCount[currPlayer2]; c++) {
    #####:   59:			if(G2.hand[currPlayer2][c] == toTrash) {
    #####:   60:				discardCard(c, currPlayer2, &G2, isTrash);
    #####:   61:				break;
        -:   62:			}
        -:   63:		}
        -:   64:	}
        -:   65:	
        1:   66:	int cardCnt = G.handCount[currPlayer];
        1:   67:	int cardCnt2 = G2.handCount[currPlayer];
        -:   68:
        1:   69:	int cmp = memcmp(&G, &G2, sizeof(struct gameState));
        -:   70:
        1:   71:	if(cardCnt != cardCnt2) {
        1:   72:		printf("FAIL - CARD COUNTS DIFFER BY %d\n", cardCnt - cardCnt2);
        -:   73:	}
        -:   74:
        1:   75:	if(cmp != 0) {
        1:   76:		printf("FAIL - GAME-STATE and TEST GAME-STATE DIFFER (%d)\n", cmp);
        -:   77:	}
        -:   78:
        1:   79:	if(cmp == 0 && cardCnt == cardCnt2) {
    #####:   80:		printf("PASS - TEST COMPLETE (%d)\n", cmp);
        -:   81:
        -:   82:	}
        -:   83:
        -:   84:	//assert(cmp == 0);
        -:   85:	//assert(cardCnt == cardCnt2);
        -:   86:
        -:   87:	//printf("cp: %d, hc: %d\n", currPlayer, cardCnt);
        -:   88:	//printf("cp: %d, hc: %d\n", currPlayer2, cardCnt2);
        -:   89:	//printf("cmp: %d\n", cmp);
        -:   90:
        1:   91:	return 0;
        -:   92:
        -:   93:}
